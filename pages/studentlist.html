<!DOCTYPE html>
<html lang="en">


<head>
  <script>
    if (typeof module === 'object') {
      window.module = module;
      module = undefined;
    }
  </script>
  <script src="../node_modules/jquery/dist/jquery.min.js"></script>
  <script>
    if (window.module) module = window.module;
  </script>
  <!-- <link rel="stylesheet" href="../css/style.css"> -->

  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
  <title>Student List</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans" />

  <script>
    window.jQuery = window.$ = require('jquery');
  </script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


</head>

<body>
  <div class="sidenav">
    <a href="assign.html">Assign</a>
    <a href="studentlist.html" class="active">Student List</a>
    <a href="workplacelist.html">Workplace List</a>
  </div>

  <!-- <div class="main"> -->
  <div class="container">

    <div class="table-responsive">
      <h1 align="center">Student List</h1>
      <br />
      <div align="center">
        <button type="button" name="load_data" id="load_data" class="btn btn-info">Load Data</button>
      </div>
      <br />
      <input class="input" type="text" id="myInput" onkeyup="searchTable()" placeholder="Search by Student ID..." title="Type in a name">
      <div class="rowStudents" id="parsed_csv_list">
        <div class="row" id="parsed_csv_list">
        </div>
        <div id="student_table">
        </div>
      </div>
    </div>
    <!-- </div> -->
</body>

</html>
<!-- Display the data in html table -->
<script>
  $(document).ready(function () { 
    $('#load_data').click(function () {
      $.ajax({
        url: "../Students.csv",
        dataType: "text",
        success: function (data) {
          var employee_data = data.split(/\r?\n|\r/);
          var table_data = '<table class="table table-bordered table-striped">';
          for (var count = 0; count < employee_data.length; count++) {
            var cell_data = employee_data[count].split(",");
            table_data += '<tr>';
            for (var cell_count = 0; cell_count < cell_data.length; cell_count++) {
              if (count === 0) {
                table_data += '<th>' + cell_data[cell_count] + '</th>';
              } else {
                table_data += '<td>' + cell_data[cell_count] + '</td>';
              }
            }
            table_data += '</tr>';
          }
          table_data += '</table>';
          $('#student_table').html(table_data);
        }
      });
    });

  });

  document.querySelector('#btnEd').addEventListener('click', editDetails);

  function editDetails() {
    console.log("EDIT STUDENTS HAS BEEN CALLED");
  }

  function searchTable() {
    var input, filter, table, tr, td, i;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[1];
      if (td) {
        if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  }
</script>